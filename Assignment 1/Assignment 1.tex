\documentclass[a4paper, 12pt]{article}
\usepackage{amsmath, amssymb, geometry}
\geometry{margin=1in}
\title{Mathematical Formulation for Round Robin Match Scheduling}
\author{}
\date{}
\begin{document}
\maketitle

\section*{Sets}
\begin{itemize}
    \item $T$: Set of teams, indexed by $i, j$, where $i, j \in T$.
    \item $D$: Set of days in the tournament, indexed by $d$.
    \item $S$: Set of stadiums, indexed by $s$.
    \item $Z$: Set of zones (E/W/N/S), indexed by $z$.
    \item $M$: Set of matches, where each match $m$ is a tuple $(i, j)$, $i \neq j$.
\end{itemize}

\section*{Parameters}
\begin{itemize}
    \item $\text{Home}(i)$: Home stadium of team $i$.
    \item $\text{Interest}(m)$: Interest level of match $m$, higher values indicate more interesting matches.
    \item $\text{Weekend}(d)$: Binary parameter, 1 if $d$ is a weekend, 0 otherwise.
    \item $\text{Distance}(s_1, s_2)$: Distance between stadiums $s_1$ and $s_2$.
    \item $\text{StadiumCapacity}(s)$: Capacity of stadium $s$.
    \item $\text{CityEvent}(d, s)$: Binary parameter, 1 if there is a big event in the city of stadium $s$ on day $d$, 0 otherwise.
    \item $\text{StadiumEvent}(d, s)$: Binary parameter, 1 if there is an event at stadium $s$ on day $d$, 0 otherwise.
    \item $\text{Rain}(d)$: Binary parameter, 1 if it rains on day $d$, 0 otherwise.
    \item $\text{Zone}(s)$: Zone of stadium $s$.
    \item $\text{MinGap}, \text{MaxGap}$: Minimum and maximum gap between two matches for a team.
\end{itemize}

\section*{Decision Variables}
\begin{itemize}
    \item $x_{m,d,s}$: Binary variable, 1 if match $m$ is scheduled on day $d$ at stadium $s$, 0 otherwise.
    \item $y_{i,d}$: Binary variable, 1 if team $i$ plays a match on day $d$, 0 otherwise.
    \item $z_{i,d}$: Binary variable, 1 if team $i$ has an away match on day $d$, 0 otherwise.
    \item $w_{i,d}$: Binary variable, 1 if team $i$ has a home match on day $d$, 0 otherwise.
\end{itemize}

\section*{Objective Function}
\begin{align*}
\text{Maximize: } & \sum_{m \in M} \sum_{d \in D} \sum_{s \in S} \text{Interest}(m) \cdot x_{m,d,s} \cdot \text{Weekend}(d) \\
& - \lambda_1 \sum_{i \in T} \sum_{d \in D} \sum_{s_1, s_2 \in S} \text{Distance}(s_1, s_2) \cdot z_{i,d} \cdot z_{i,d+1},
\end{align*}
where $\lambda_1$ is a weight balancing the importance of minimizing travel distances.

\section*{Constraints}
\begin{enumerate}
    \item \textbf{Each team plays all others twice (home and away):}
    \begin{align*}
        \sum_{d \in D} \sum_{s \in S} x_{m,d,s} &= 1 \quad \forall m \in M, \text{ where team } i \text{ is home.} \\
        \sum_{d \in D} \sum_{s \in S} x_{m,d,s} &= 1 \quad \forall m \in M, \text{ where team } j \text{ is home.}
    \end{align*}

    \item \textbf{Matches on weekends for high-interest games:}
    \begin{align*}
        \sum_{d \in D} \sum_{s \in S} x_{m,d,s} \cdot \text{Weekend}(d) &\geq \beta \cdot \text{Interest}(m) \quad \forall m \in M.
    \end{align*}

    \item \textbf{No overlapping of interesting matches:}
    \begin{align*}
        \sum_{m \in M} x_{m,d,s} &\leq 1 \quad \forall d \in D, \text{ where } \text{Interest}(m) > \theta.
    \end{align*}

    \item \textbf{Match gaps for teams:}
    \begin{align*}
        \text{MinGap} &\leq d_2 - d_1 \leq \text{MaxGap} \quad \forall d_1, d_2 \in D, \forall i \in T.
    \end{align*}

    \item \textbf{Minimize consecutive away matches:}
    \begin{align*}
        z_{i,d} + z_{i,d+1} &\leq 1 \quad \forall d \in D, \forall i \in T.
    \end{align*}

    \item \textbf{Home/away match balance:}
    \begin{align*}
        w_{i,d} + z_{i,d} &\leq 1 \quad \forall d \in D, \forall i \in T.
    \end{align*}

    \item \textbf{Avoid matches on restricted days:}
    \begin{align*}
        x_{m,d,s} &= 0 \quad \text{if } \text{CityEvent}(d,s) = 1 \text{ or } \text{StadiumEvent}(d,s) = 1.
    \end{align*}

    \item \textbf{Match relocation due to rain:}
    \begin{align*}
        x_{m,d+1,s} &\geq x_{m,d,s} \cdot \text{Rain}(d) \quad \forall m \in M, \forall d \in D.
    \end{align*}

    \item \textbf{Stadium capacity for smaller matches:}
    \begin{align*}
        x_{m,d,s} \cdot \text{Interest}(m) &\leq \text{StadiumCapacity}(s) \quad \forall m \in M, \forall s \in S.
    \end{align*}

    \item \textbf{Zone fairness:}
    \begin{align*}
        \sum_{d \in D} \sum_{s \in S: \text{Zone}(s) = z} x_{m,d,s} &\text{ is balanced across zones.}
    \end{align*}

    \item \textbf{Day and night match balance:}
    \begin{align*}
        \sum_{d \in D: \text{DayMatch}(d)} y_{i,d} &\approx \sum_{d \in D: \text{NightMatch}(d)} y_{i,d} \quad \forall i \in T.
    \end{align*}
\end{enumerate}

\section*{Assumptions}
\begin{itemize}
    \item All matches can be rescheduled to the next day if rain occurs.
    \item Interest levels of matches are pre-determined and quantifiable.
    \item Stadiums are assigned to zones, and matches are distributed equitably across zones.
    \item Travel distances between stadiums are known and constant.
    \item MinGap and MaxGap values are set based on league regulations.
    \item Day and night matches are clearly defined for all days in $D$.
\end{itemize}

\end{document}
