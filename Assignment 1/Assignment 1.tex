\documentclass[a4paper, 12pt]{article}
\usepackage{amsmath, amssymb, geometry}
\geometry{margin=1in}
\title{Optimization in Industry Assignment 1 \\ Mathematical Formulation for Round Robin Match Scheduling}
\author{Utpalraj Kemprai \\ MDS202352}
\date{\today}
\begin{document}
\maketitle

\section*{Sets}
\begin{itemize}
    \item $T$: Set of teams, indexed by $i, j$, where $i, j \in T$.
    \item $D$: Set of days in the tournament, indexed by $d$.
\end{itemize}

\section*{Parameters}
\begin{itemize}
    \item $I_{i,j}$: Binary parameter, 1 if the match between team i and j is interesting, 0 otherwise
    \item $W_{d}$: Binary parameter, 1 if $d$ is a weekend, 0 otherwise.
    \item $D_{i,j}$: Distance between home stadiums of teams i and j.
    \item $SC_{i}$: Capacity of home stadium of team .
    \item $E_{d,i}$: Binary parameter, 1 if there is a big event in the city of home stadium of team $i$ on day $d$, 0 otherwise.
    \item $Z_i$: Zone of home stadium of team $i$.
    \item $\text{MinGap}, \text{MaxGap}$: Minimum and maximum gap between two consecutive matches for a team.
    \item $\text{N}_{i,j,d}$: Binary variable if there is a night match between team i and j at home stadium of i in day d, 0 otherwise
\end{itemize}

\section*{Decision Variables}
\begin{itemize}
    \item $x_{i,j,d}$ $(i \neq j)$: Binary variable, 1 if match (day or night) is scheduled on day $d$ at home stadium of $i$ between team $i$ amd $j$, 0 otherwise.
    
\end{itemize}

\section*{Objective Function}
\begin{align*}
\text{Maximize: } & \sum_{m \in M} \sum_{d \in D} \sum_{s \in S} \text{Interest}(m) \cdot x_{m,d,s} \cdot \text{Weekend}(d) \\
& - \lambda_1 \sum_{i \in T} \sum_{d \in D} \sum_{s_1, s_2 \in S} \text{Distance}(s_1, s_2) \cdot z_{i,d} \cdot z_{i,d+1},
\end{align*}
where $\lambda_1$ is a weight balancing the importance of minimizing travel distances.

\section*{Constraints}
\begin{enumerate}
    \item \textbf{Each team plays all others twice (one home and one away):}
    \begin{align*}
        \sum_{d \in D} \sum_{j \in T, j \neq i} x_{i,j,d} = |T| - 1 , \forall i \in T \\
        \sum_{d \in D} \sum_{i \in T, j \neq i} x_{i,j,d} = |T| - 1 , \forall j \in T 
    \end{align*}

    \item \textbf{Only one match in a single day/night slot:}
    \begin{align*}
        \sum_{i,j \in T, i \neq j} x_{i,j,d} (1-N_{i,j,d}) \leq 1, \forall d \in D \\
        \sum_{i,j \in T, i \neq j} x_{i,j,d} N_{i,j,d} \leq 1, \forall d \in D 
    \end{align*}

    \item \textbf{Night Match is not possible if there is no match on that day}
    \begin{align*}
        N_{i,j,d} \leq x_{i,j,d}
    \end{align*}

    \item \textbf{No overlapping of interesting matches:}
    \begin{align*}
        \sum_{i,j \in T, i \neq j} x_{i,j,d} I_{i,j} N_{i,j,d} &\leq 1 \quad \forall d \in D \\
        \sum_{i,j \in T, i \neq j} x_{i,j,d} I_{i,j} (1 - N_{i,j,d}) &\leq 1 \quad \forall d \in D
    \end{align*}

    \item \textbf{Match gaps for teams:}
    % \begin{align*}
    %     \text{MinGap} &\leq d_2 - d_1 \leq \text{MaxGap} \quad \forall d_1, d_2 \in D, \forall i \in T.
    % \end{align*}

    \item \textbf{Minimize consecutive away matches:}
    % \begin{align*}
    %     z_{i,d} + z_{i,d+1} &\leq 1 \quad \forall d \in D, \forall i \in T.
    % \end{align*}

    \item \textbf{Home/away match balance:}
    % \begin{align*}
    %     w_{i,d} + z_{i,d} &\leq 1 \quad \forall d \in D, \forall i \in T.
    % \end{align*}

    \item \textbf{Avoid matches on restricted days:}
    \begin{align*}
        x_{i,j,d} &\leq 1 - E_{d,i} \quad \forall d \in D, \forall i,j \in T, i \neq j
    \end{align*}

    \item \textbf{Match relocation day for incase of rain:}
    \begin{align*}
        x_{i,j,d} + x_{i,j,d+1} &\leq 1 \quad \forall d \in D \setminus \{ \text{end\_date} \}
    \end{align*}

    \item \textbf{Stadium capacity for smaller matches:}
    % \begin{align*}
    %     x_{m,d,s} \cdot \text{Interest}(m) &\leq \text{StadiumCapacity}(s) \quad \forall m \in M, \forall s \in S.
    % \end{align*}

    % \item \textbf{Zone fairness:}
    % \begin{align*}
    %     \sum_{d \in D} \sum_{s \in S: \text{Zone}(s) = z} x_{m,d,s} &\text{ is balanced across zones.}
    % \end{align*}

    \item \textbf{Day and night match balance:}
    \begin{align*}
        \sum_{d \in D: \text{DayMatch}(d)} y_{i,d} &\approx \sum_{d \in D: \text{NightMatch}(d)} y_{i,d} \quad \forall i \in T.
    \end{align*}
\end{enumerate}

\section*{Assumptions}
\begin{itemize}
    \item All matches can be rescheduled to the next day if rain occurs.
    \item Interesting matches are known in advanced and depends on which two teams are playing only.
    \item Stadiums are uniformly distributed across zones.
    \item Travel distances between stadiums are known and constant.
    \item Each team has only one home stadium.
    \item MinGap and MaxGap values are set based on league regulations.
    \item Day and night matches do not overlap with each ohter for any day.
    \item $\forall d \in D, d+1, \text{ is the immediate next day}$ 
    \item $\text{end\_date}$ is the last date in $D$
\end{itemize}

\end{document}
